/*! Copyright © 2009-2023 Postcode Anywhere (Holdings) Ltd. (http://www.postcodeanywhere.co.uk)
 *
 * PlatformEmailValidation v1.50
 * Capture Plus for the web.
 *
 * WEB-2-10 26/05/2023 13:27:18
 */
(function(n,t){function u(){r.addEventListener?(i.ignore(r,"DOMContentLoaded",u),e=!0,i.ready()):r.readyState==="complete"&&(i.ignore(r,"onreadystatechange",u),e=!0,i.ready())}function v(){r.readyState==="complete"?(e=!0,i.ready()):(r.addEventListener?i.listen(r,"DOMContentLoaded",u):i.listen(r,"onreadystatechange",u),i.listen(n,"load",u))}function a(n){var t=new i.XMLHttpRequest;t.onreadystatechange=function(){t.readyState===4&&t.status===200&&n.callback(i.parseJSON(t.responseText))},n.credentials&&(t.withCredentials=n.credentials),t.onerror=n.serviceError,t.ontimeout=n.timeoutError,t.open("POST",n.destination,!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send(n.query)}function p(n){function o(n,t){var i=r.createElement("input");i.name=n,i.value=t,u.appendChild(i)}var u=r.createElement("form"),t=r.createElement("iframe"),s=!1,e,f;u.method="POST",u.action=i.protocol+"//"+i.host+"/"+n.service+"/json.ws";for(e in n.data)o(e,n.data[e]);o("CallbackVariable","window.name"),o("CallbackWithScriptTags","true"),t.onload=function(){s?(n.callback({Items:i.parseJSON(t.contentWindow.name)}),r.body.removeChild(t)):(s=!0,t.contentWindow.location="about:blank")},t.style.display="none",r.body.appendChild(t),f=t.contentDocument||t.contentWindow.document,f.body?f.body.appendChild(u):f.appendChild(u),u.submit()}function o(t){n.navigator.appName==="Microsoft Internet Explorer"?p(t):a(t)}function y(n){var t=new i.XMLHttpRequest;n.url.length>i.limit?(n.post=!0,o(n)):(t.onreadystatechange=function(){t.readyState===4&&t.status===200&&n.callback(i.parseJSON(t.responseText))},n.credentials&&(t.withCredentials=n.credentials),t.onerror=n.serviceError,t.ontimeout=n.timeoutError,t.open("GET",n.url,!0),t.send())}function h(n){var t=i.create("script",{type:"text/javascript",async:"async"}),u=r.getElementsByTagName("head")[0];n.position=i.scriptRequests.push(n),t.src=n.url+"&callback=pca.scriptRequests["+(n.position-1)+"].callback",t.onload=t.onreadystatechange=function(){this.readyState&&this.readyState!=="loaded"&&this.readyState!=="complete"||(t.onload=t.onreadystatechange=null,u&&t.parentNode&&u.removeChild(t))},t.src.length>i.limit?(n.post=!0,o(n)):u.insertBefore(t,u.firstChild)}function l(t){n.navigator.appName==="Microsoft Internet Explorer"?h(t):y(t)}function s(t){if(i.blockRequests&&i.waitingRequest){i.requestQueue=[t];return}if(t.block&&(i.blockRequests=!0),t.queue&&i.waitingRequest){i.requestQueue.push(t);return}if(i.waitingRequest=!0,t.cache&&i.requestCache[t.url]){function r(){t.callback(i.requestCache[t.url].response)}n.setImmediate?n.setImmediate(r):n.setTimeout(r,1);return}t.post?o(t):l(t)}function c(n){i.waitingRequest=!1,n.block&&(i.blockRequests=!1),n.unwrapped?n.success(n.response,n.response,n):n.response.Items.length===1&&n.response.Items[0].Error!==t?n.error(n.response.Items[0].Description,n):n.success(n.response.Items,n.response,n),n.cache&&(i.requestCache[n.url]=n),n.position&&(i.scriptRequests[n.position-1]=null),i.requestQueue.length&&s(i.requestQueue.shift())}var i=n.pca=n.pca||{},r=n.document,e,f;typeof r=="undefined"&&(r={attachEvent:function(){},location:{}}),typeof n.location=="undefined"&&(n.location={}),typeof n.navigator=="undefined"&&(n.navigator={}),typeof n.attachEvent=="undefined"&&(n.attachEvent=function(){}),i.protocol="https:",i.host="services.postcodeanywhere.co.uk",i.endpoint="json3ex.ws",i.limit=2e3,i.sourceString=i.sourceString||"PCA-SCRIPT",i.synonyms=i.synonyms||[{r:/\bN(?=\s)/,w:"NORTH"},{r:/\b(?:NE|NORTHEAST)(?=\s)/,w:"NORTH EAST"},{r:/\b(?:NW|NORTHWEST)(?=\s)/,w:"NORTH WEST"},{r:/\bS(?=\s)/,w:"SOUTH"},{r:/\b(?:SE|SOUTHEAST)(?=\s)/,w:"SOUTH EAST"},{r:/\b(?:SW|SOUTHWEST)(?=\s)/,w:"SOUTH WEST"},{r:/\bE(?=\s)/,w:"EAST"},{r:/\bW(?=\s)/,w:"WEST"},{r:/\bST(?=\s)/,w:"SAINT"}],i.diacritics=i.diacritics||[{r:/[ÀÁÂÃ]/gi,w:"A"},{r:/Å/gi,w:"AA"},{r:/[ÆæÄ]/gi,w:"AE"},{r:/Ç/gi,w:"C"},{r:/Ð/gi,w:"DJ"},{r:/[ÈÉÊË]/gi,w:"E"},{r:/[ÌÍÏ]/gi,w:"I"},{r:/Ñ/gi,w:"N"},{r:/[ÒÓÔÕ]/gi,w:"O"},{r:/[ŒØÖ]/gi,w:"OE"},{r:/Š/gi,w:"SH"},{r:/ß/gi,w:"SS"},{r:/[ÙÚÛ]/gi,w:"U"},{r:/Ü/gi,w:"UE"},{r:/[ŸÝ]/gi,w:"ZH"},{r:/-/gi,w:" "},{r:/[.,]/gi,w:""}],i.hypertext=i.hypertext||[{r:/&/g,w:"&amp;"},{r:/"/g,w:"&quot;"},{r:/'/g,w:"&#39;"},{r:/</g,w:"&lt;"},{r:/>/g,w:"&gt;"}],i.requestQueue=i.requestQueue||[],i.requestCache=i.requestCache||{},i.scriptRequests=i.scriptRequests||[],i.waitingRequest=i.waitingRequest||!1,i.blockRequests=i.blockRequests||!1,i.styleFixes=i.styleFixes||[],i.agent=i.agent||n.navigator&&n.navigator.userAgent||"",i.galaxyFix=i.galaxyFix||/Safari\/534.30/.test(i.agent)&&/GT-I8190|GT-I9100|GT-I9305|GT-P3110/.test(i.agent),i.container=i.container||null,i.XMLHttpRequest=i.XMLHttpRequest||n.XMLHttpRequest,e=!1,f=[],i.fuzzyMatch=typeof i.fuzzyMatch=="undefined"?!0:i.fuzzyMatch,i.fuzzyTags=i.fuzzyTags||["*"],i.ready=i.ready||function(n){var i,t;if(e){if(f.length)for(i=f,f=[],t=0;t<i.length;t++)i[t]();n&&n()}else typeof n=="function"&&f.push(n)},i.Eventable=i.Eventable||function(n){var t=n||this;return t.listeners={},t.listen=function(n,i){t.listeners[n]=t.listeners[n]||[],t.listeners[n].push(i)},t.ignore=function(n,i){if(t.listeners[n])for(var r=0;r<t.listeners[n].length;r++)if(t.listeners[n][r]===i){t.listeners[n].splice(r,1);break}},t.fire=function(n,i){var u,f,r;if(t.listeners[n])for(u=0;u<t.listeners[n].length;u++){for(f=[i],r=2;r<arguments.length;r++)f.push(arguments[r]);t.listeners[n][u].apply(t,f)}},t},i.Request=i.Request||function(n,t,r,u){var f=new i.Eventable(this),e;f.service=n||"",f.data=t||{},f.success=r||function(){},f.error=u||function(){},f.response=null,f.source=i.sourceString||"",f.sessionId=i.sessionId||"",f.cache=!!f.data.$cache,f.queue=!!f.data.$queue,f.block=!!f.data.$block,f.post=!!f.data.$post,f.credentials=!!f.data.$credentials,f.unwrapped=!!f.data.$unwrapped,f.destination=~f.service.indexOf("//")?f.service:i.protocol+"//"+i.host+"/"+f.service+"/"+i.endpoint,f.query="";for(e in f.data)f.query+=(f.query?"&":"")+e+"="+encodeURIComponent(f.data[e]);f.source&&(f.query+=(f.query?"&":"")+"SOURCE="+encodeURIComponent(f.source)),f.sessionId&&(f.query+=(f.query?"&":"")+"SESSION="+encodeURIComponent(f.sessionId)),f.url=f.destination+"?"+f.query,f.callback=function(n){f.response=n,c(f)},f.serviceError=function(n){f.error(n&&n.currentTarget&&n.currentTarget.statusText?"Webservice request error: "+n.currentTarget.statusText:"Webservice request failed.")},f.timeoutError=function(){f.error("Webservice request timed out.")},f.process=function(){i.process(f)}},i.process=i.process||function(n){s(n)},i.fetch=i.fetch||function(n,t,r,u){s(new i.Request(n,t,r,u))},i.clearBlockingRequests=i.clearBlockingRequests||function(){i.waitingRequest=!1,i.blockRequests=!1},i.loadScript=i.loadScript||function(n,t,u){var f=i.create("script",{type:"text/javascript"}),e=(u||r).getElementsByTagName("head")[0];f.onload=f.onreadystatechange=function(){this.readyState&&this.readyState!=="loaded"&&this.readyState!=="complete"||(f.onload=f.onreadystatechange=null,(t||function(){})())},f.src=(~n.indexOf("/")?"":i.protocol+"//"+i.host+"/js/")+n,e.insertBefore(f,e.firstChild)},i.loadStyle=i.loadStyle||function(n,t,u){var f=i.create("link",{type:"text/css",rel:"stylesheet"}),e=(u||r).getElementsByTagName("head")[0];f.onload=f.onreadystatechange=function(){this.readyState&&this.readyState!=="loaded"&&this.readyState!=="complete"||(f.onload=f.onreadystatechange=null,(t||function(){})())},f.href=(~n.indexOf("/")?"":i.protocol+"//"+i.host+"/css/")+n,e.insertBefore(f,e.firstChild)},i.Item=i.Item||function(n,t){var r=new i.Eventable(this),u="pcaselected";return r.data=n,r.format=t,r.html=i.formatLine(n,t),r.title=n.title||i.removeHtml(r.html),r.tag=i.formatTag(n.tag||r.html),r.element=i.create("div",{className:"pcaitem",innerHTML:r.html,title:r.title}),r.visible=!0,r.highlight=function(){return i.addClass(r.element,u),r.fire("highlight"),r},r.lowlight=function(){return i.removeClass(r.element,u),r.fire("lowlight"),r},r.mouseover=function(){r.fire("mouseover")},r.mouseout=function(){r.fire("mouseout")},r.mousedown=function(){r.fire("mousedown")},r.mouseup=function(){r.fire("mouseup"),i.galaxyFix&&r.select()},r.click=function(){(r.fire("click"),i.galaxyFix)||r.select()},r.select=function(){return r.fire("select",r.data),r},r.hide=function(){return r.visible=!1,r.element.style.display="none",r.fire("hide"),r},r.show=function(){return r.visible=!0,r.element.style.display="",r.fire("show"),r},i.listen(r.element,"mouseover",r.mouseover),i.listen(r.element,"mouseout",r.mouseout),i.listen(r.element,"mousedown",r.mousedown),i.listen(r.element,"mouseup",r.mouseup),i.listen(r.element,"click",r.click),r},i.Collection=i.Collection||function(){var n=new i.Eventable(this);return n.items=[],n.highlighted=-1,n.count=0,n.firstItem=null,n.lastItem=null,n.firstVisibleItem=null,n.lastVisibleItem=null,n.add=function(t,r,u){function o(t){var f=new i.Item(t,r);return f.listen("mouseover",function(){n.highlight(f)}),f.listen("select",function(t){n.fire("select",t),u(t)}),n.items.push(f),e.push(f),f}var e=[],f;if(u=u||function(){},t.length)for(f=0;f<t.length;f++)o(t[f]);else o(t);return n.count+=t.length,n.firstVisibleItem=n.firstItem=n.items[0],n.lastVisibleItem=n.lastItem=n.items[n.items.length-1],n.fire("add",e),n},n.sort=function(t){return n.items.sort(function(n,i){return t?n.data[t]>i.data[t]?1:-1:n.tag>i.tag?1:-1}),n.fire("sort"),n},n.reverse=function(){return n.items.reverse(),n.fire("reverse"),n},n.filter=function(t){var u=i.formatTag(t),r=n.count;return n.count=0,n.firstVisibleItem=null,n.lastVisibleItem=null,n.all(function(t){~t.tag.indexOf(u)?(t.show(),n.count++,n.firstVisibleItem=n.firstVisibleItem||t,n.lastVisibleItem=t):t.hide()}),r!==n.count&&n.fire("filter"),n},n.match=function(t){var u=i.formatTag(t),r=[];return n.all(function(n){~n.tag.indexOf(u)&&r.push(n)}),r},n.clear=function(){return n.items=[],n.count=0,n.highlighted=-1,n.firstItem=null,n.lastItem=null,n.firstVisibleItem=null,n.lastVisibleItem=null,n.fire("clear"),n},n.all=function(t){for(var i=0;i<n.items.length;i++)if(t(n.items[i],i)===!1)break;return n},n.highlight=function(t){return~n.highlighted&&n.items[n.highlighted].lowlight(),n.highlighted=n.index(t),~n.highlighted&&n.items[n.highlighted].highlight(),n.fire("highlight",t),n},n.index=function(t){for(var i=0;i<n.items.length;i++)if(n.items[i]===t)return i;return-1},n.first=function(t){for(var i=0;i<n.items.length;i++)if(t?t(n.items[i]):n.items[i].visible)return n.items[i];return null},n.last=function(t){for(var i=n.items.length-1;i>=0;i--)if(t?t(n.items[i]):n.items[i].visible)return n.items[i];return null},n.next=function(t){for(var i=n.highlighted+1;i<n.items.length;i++)if(t?t(n.items[i]):n.items[i].visible)return n.items[i];return n.first()},n.previous=function(t){for(var i=n.highlighted-1;i>=0;i--)if(t?t(n.items[i]):n.items[i].visible)return n.items[i];return n.last()},n.visibleItems=function(){var t=[];return n.all(function(n){n.visible&&t.push(n)}),t},n},i.List=i.List||function(t){function u(n,t,u){var f=new i.Item(n,t);return f.listen("mouseover",function(){r.collection.highlight(f),f.highlight()}),r.collection.listen("highlight",f.lowlight),f.listen("select",function(n){r.collection.fire("select",n),u(n)}),f}var r=new i.Eventable(this);return r.options=t||{},r.element=i.create("div",{className:"pca pcalist"}),r.collection=new i.Collection,r.visible=!0,r.scroll={held:!1,moved:!1,origin:0,position:0,x:0,y:0,dx:0,dy:0},r.highlightedItem=null,r.headerItem=null,r.footerItem=null,r.firstItem=null,r.lastItem=null,r.firstItemClass="pcafirstitem",r.lastItemClass="pcalastitem",r.options.minItems=r.options.minItems||0,r.options.maxItems=r.options.maxItems||10,r.options.allowTab=r.options.allowTab||!1,r.show=function(){return r.visible=!0,r.element.style.display="",r.fire("show"),r.resize(),r},r.hide=function(){return r.visible=!1,r.element.style.display="none",r.fire("hide"),r},r.draw=function(){return r.destroy(),r.headerItem&&r.element.appendChild(r.headerItem.element),r.collection.all(function(n){r.element.appendChild(n.element)}),r.footerItem&&r.element.appendChild(r.footerItem.element),r.resize(),r.fire("draw"),r},r.markItems=function(){r.firstItem&&i.removeClass(r.firstItem.element,r.firstItemClass),r.lastItem&&i.removeClass(r.lastItem.element,r.lastItemClass),r.collection.count&&(r.firstItem=r.headerItem||r.collection.firstVisibleItem,r.lastItem=r.footerItem||r.collection.lastVisibleItem,i.addClass(r.firstItem.element,r.firstItemClass),i.addClass(r.lastItem.element,r.lastItemClass))},r.add=function(n,t,i){return r.collection.add(n,t,i),r.draw(),r},r.destroy=function(){while(r.element.childNodes&&r.element.childNodes.length)r.element.removeChild(r.element.childNodes[0]);return r},r.clear=function(){return r.collection.clear(),r.destroy(),r.fire("clear"),r},r.setScroll=function(n){return r.element.scrollTop=n,r.fire("scroll"),r},r.enableTouch=function(){function f(t){t=t||n.event,r.scroll.held=!0,r.scroll.moved=!1,r.scroll.origin=parseInt(r.scrollTop),r.scroll.y=parseInt(t.touches[0].pageY)}function e(){r.scroll.held=!1}function t(){r.scroll.held=!1}function u(t){r.scroll.held&&(t=t||n.event,i.smash(t),r.scroll.dy=r.scroll.y-parseInt(t.touches[0].pageY),r.scroll.position=r.scroll.origin+r.scroll.dy,r.setScroll(r.scroll.position),r.scroll.moved=!0)}return i.listen(r.element,"touchstart",f),i.listen(r.element,"touchmove",u),i.listen(r.element,"touchend",e),i.listen(r.element,"touchcancel",t),r},r.move=function(n){return n&&(r.collection.highlight(n),(n===r.headerItem||n===r.footerItem)&&n.highlight(),r.scrollToItem(n)),r},r.next=function(){return r.move(r.nextItem())},r.previous=function(){return r.move(r.previousItem())},r.first=function(){return r.move(r.firstItem)},r.last=function(){return r.move(r.lastItem)},r.nextItem=function(){return r.highlightedItem?r.highlightedItem===r.collection.lastVisibleItem&&(r.footerItem||r.headerItem)?r.footerItem||r.headerItem:r.footerItem&&r.headerItem&&r.highlightedItem===r.footerItem?r.headerItem:r.collection.next():r.firstItem},r.previousItem=function(){return r.highlightedItem?r.highlightedItem===r.collection.firstVisibleItem&&(r.footerItem||r.headerItem)?r.headerItem||r.footerItem:r.footerItem&&r.headerItem&&r.highlightedItem===r.headerItem?r.footerItem:r.collection.previous():r.lastItem},r.currentItem=function(){return r.highlightedItem},r.selectable=function(){return r.visible&&!!r.currentItem()},r.select=function(){return r.selectable()&&r.currentItem().select(),r},r.navigate=function(n){switch(n){case 40:return r.next(),!0;case 38:return r.previous(),!0;case 13:if(r.selectable())return r.select(),!0;case 9:if(r.options.allowTab)return r.next(),!0}return!1},r.scrollToItem=function(n){return r.scroll.position=r.element.scrollTop,n.element.offsetTop<r.scroll.position?(r.scroll.position=n.element.offsetTop,r.setScroll(r.scroll.position)):n.element.offsetTop+n.element.offsetHeight>r.scroll.position+r.element.offsetHeight&&(r.scroll.position=n.element.offsetTop+n.element.offsetHeight-r.element.offsetHeight,r.setScroll(r.scroll.position)),r},r.filter=function(n){var t=r.collection.count;return r.collection.filter(n),r.markItems(),t!==r.collection.count&&r.fire("filter",n),r},r.getHeight=function(){for(var t=r.collection.visibleItems(),o=r.headerItem?i.getSize(r.headerItem.element).height:0,e=r.footerItem?i.getSize(r.footerItem.element).height:0,f=0,u=0,n=0;n<t.length&&n<r.options.maxItems;n++)f=i.getSize(t[n].element).height,u+=f;return t.length<r.options.minItems&&(u+=(f+1)*(r.options.minItems-t.length)),u+o+e},r.resize=function(){var n=r.getHeight();n>0&&(r.element.style.height=n+"px")},r.setHeaderItem=function(n,t,f){return r.headerItem=u(n,t,f),i.addClass(r.footerItem.element,"pcaheaderitem"),r.markItems(),r},r.setFooterItem=function(n,t,f){return r.footerItem=u(n,t,f),i.addClass(r.footerItem.element,"pcafooteritem"),r.markItems(),r},r.collection.listen("highlight",function(n){r.highlightedItem=n}),r.collection.listen("add",function(n){r.markItems(),r.fire("add",n)}),r.options.name&&(i.setAttributes(r.element,{id:r.options.name,role:"listbox","aria-activedescendant":""}),r.collection.listen("add",function(n){function u(n){n.listen("highlight",function(){i.setAttributes(r.element,{"aria-activedescendant":n.id})})}for(var t=0;t<n.length;t++)u(n[t]);r.collection.all(function(n,t){n.element.id=n.id=r.options.name+"_item"+t,i.setAttributes(n.element,{role:"option"})})})),r},i.AutoComplete=i.AutoComplete||function(t,u){function o(){f.checkHide()}function e(){f.resize()}var f=new i.Eventable(this);return f.options=u||{},f.options.force=f.options.force||!1,f.options.allowTab=f.options.allowTab||!1,f.options.onlyDown=f.options.onlyDown||!1,f.element=i.create("div",{className:"pcaautocomplete pcatext"}),f.anchors=[],f.list=new i.List(f.options),f.fieldListeners=[],f.field=null,f.positionField=null,f.visible=!0,f.hover=!1,f.focused=!1,f.upwards=!1,f.controlDown=!1,f.disabled=!1,f.fixedWidth=!1,f.emptyMessage=f.options.emptyMessage||"",f.skipFilter=!1,f.stealth=!1,f.header={element:i.create("div",{className:"pcaheader"}),headerText:i.create("div",{className:"pcamessage"}),init:function(){this.hide()},setContent:function(n){return n=n||"",typeof n=="string"?this.element.innerHTML=n:this.element.appendChild(n),f.fire("header"),this},setText:function(n){return n=n||"",this.element.appendChild(this.headerText),typeof n=="string"?(i.clear(this.headerText),this.headerText.appendChild(i.create("span",{className:"pcamessageicon"})),this.headerText.appendChild(i.create("span",{innerHTML:n}))):this.headerText.appendChild(n),f.fire("header"),this},clear:function(){return this.setContent(),f.fire("header"),this},show:function(){return this.element.style.display="",f.fire("header"),this},hide:function(){return this.element.style.display="none",f.fire("header"),this}},f.footer={element:i.create("div",{className:"pcafooter"}),init:function(){this.hide()},setContent:function(n){return n=n||"",typeof n=="string"?this.element.innerHTML=n:this.element.appendChild(n),f.fire("footer"),this},show:function(){return this.element.style.display="",f.fire("footer"),this},hide:function(){return this.element.style.display="none",f.fire("footer"),this}},f.load=function(){if(t.length&&t.constructor===Array)for(var u=0;u<t.length;u++)f.attach(i.getElement(t[u]));else f.attach(i.getElement(t));return i.listen(f.element,"mouseover",function(){f.hover=!0}),i.listen(f.element,"mouseout",function(){f.hover=!1}),i.listen(r,"click",o),i.listen(n,"resize",e),(r.documentMode&&r.documentMode<=7||/\bMSIE\s(7|6)/.test(i.agent))&&f.setWidth(280),r.documentMode&&r.documentMode<=5&&(i.applyStyleFixes(".pca .pcafooter",{fontSize:"0pt"}),i.applyStyleFixes(".pca .pcaflag",{fontSize:"0pt"})),f},f.attach=function(n){function t(n,t,r){i.listen(n,t,r),f.fieldListeners.push({field:n,event:t,action:r})}function e(n){function e(){o.appendChild(f.element),f.focus(n)}var u=i.create("table",{className:"pca pcaanchor",cellPadding:0,cellSpacing:0}),s=[u.insertRow(0).insertCell(0),u.insertRow(1).insertCell(0)],o=i.create("div",{className:"pcachain"});if(!n||!n.tagName){i.append(f.element);return}n.parentNode.insertBefore(u,n),s[0].appendChild(n),s[1].appendChild(o),f.anchors.push(u),i.inputField(n)&&(t(n,"keyup",f.keyup),t(n,"keydown",f.keydown),t(n,"focus",e),t(n,"blur",f.blur),t(n,"keypress",f.keypress),t(n,"paste",f.paste),typeof r.activeElement!="unknown"&&n===r.activeElement&&e()),t(n,"click",function(){f.click(n)}),t(n,"dblclick",function(){f.dblclick(n)}),t(n,"change",function(){f.change(n)})}function u(n){function u(){f.focus(n)}(i.append(f.element),n&&n.tagName)&&(i.inputField(n)&&(t(n,"keyup",f.keyup),t(n,"keydown",f.keydown),t(n,"focus",u),t(n,"blur",f.blur),t(n,"keypress",f.keypress),t(n,"paste",f.paste),typeof r.activeElement!="unknown"&&n===r.activeElement&&u()),t(n,"click",function(){f.click(n)}),t(n,"dblclick",function(){f.dblclick(n)}),t(n,"change",function(){f.change(n)}))}f.options.force?e(n):u(n)},f.position=function(t){var o=i.getPosition(t),a=i.getSize(t),p=i.getTopOffsetParent(t),h=i.getParentScroll(t),s=i.getSize(f.element),v=i.getSize(n),u=i.getScroll(n),e=!i.isPage(p),w=o.top+s.height-(e?0:u.top)<v.height,y=o.top-(e?0:u.top)>s.height,l,c;return f.upwards=!w&&y&&!f.options.onlyDown,f.upwards?f.options.force?f.element.style.top=-(s.height+a.height+2)+"px":(f.element.style.top=o.top-h.top-s.height+(e?u.top:0)+"px",f.element.style.left=o.left-h.left+(e?u.left:0)+"px"):f.options.force?f.element.style.top="auto":(f.element.style.top=o.top-h.top+a.height+1+(e?u.top:0)+"px",f.element.style.left=o.left-h.left+(e?u.left:0)+"px"),f.options.left&&(f.element.style.left=parseInt(f.element.style.left)+parseInt(f.options.left)+"px"),f.options.top&&(f.element.style.top=parseInt(f.element.style.top)+parseInt(f.options.top)+"px"),l=parseInt(i.getStyle(f.element,"borderLeftWidth"))+parseInt(i.getStyle(f.element,"borderRightWidth"))||0,c=Math.max(i.getSize(t).width-l,0),f.fixedWidth||(f.element.style.minWidth=c+"px"),(r.documentMode&&r.documentMode<=7||/\bMSIE\s(7|6)/.test(i.agent))&&(f.setWidth(Math.max(c,280)),f.element.style.left=(parseInt(f.element.style.left)||0)-2+"px",f.element.style.top=(parseInt(f.element.style.top)||0)-2+"px"),f.positionField=t,f.fire("move"),f},f.reposition=function(){return f.positionField&&f.position(f.positionField),f},f.prompt=function(n,t){if(typeof t=="number"){if(t===0?n=" "+n:t>=n.length?(n=n+" ",t++):(n=n.substring(0,t)+"  "+n.substring(t,n.length),t++),i.setValue(f.field,n),f.field.setSelectionRange)f.field.focus(),f.field.setSelectionRange(t,t);else if(f.field.createTextRange){var r=f.field.createTextRange();r.move("character",t),r.select()}}else i.setValue(f.field,n);return f},f.show=function(){return f.disabled||f.stealth||(f.visible=!0,f.element.style.display="",f.list.collection.count?(f.options.emptyMessage&&f.header.clear().hide(),f.list.show()):(f.options.emptyMessage&&f.header.setText(f.options.emptyMessage).show(),f.list.hide()),f.setScroll(0),f.reposition(),f.fire("show")),f},f.showAll=function(){f.list.filter(""),f.show()},f.hide=function(){return f.visible=!1,f.element.style.display="none",f.fire("hide"),f},f.focus=function(n){f.field=n,f.focused=!0,f.show(),f.position(n),f.fire("focus")},f.blur=function(){f.focused=!1,f.checkHide(),f.fire("blur")},f.checkHide=function(){return!f.visible||f.focused||f.hover||f.hide(),f},f.handleKey=function(n,t){n===27?(f.hide(),f.fire("escape")):n===17?f.controlDown=!1:n===8||n===46?(f.filter(),f.fire("delete")):n!==0&&n<=46&&n!==32?f.visible&&f.list.navigate(n)?t&&i.smash(t):(n===38||n===40)&&f.filter():f.visible&&f.filter(),f.fire("keyup",n)},f.keydown=function(t){t=t||n.event;var r=t.which||t.keyCode;r===17&&(f.controlDown=!0),r===9&&f.options.allowTab&&i.smash(t)},f.keyup=function(t){t=t||n.event;var i=t.which||t.keyCode;f.handleKey(i,t)},f.keypress=function(t){var r=n.event?n.event.keyCode:t.which;f.visible&&r===13&&f.list.selectable()&&i.smash(t)},f.paste=function(){n.setTimeout(function(){f.filter(),f.fire("paste")},0)},f.click=function(n){f.fire("click",n)},f.dblclick=function(n){f.fire("dblclick",n)},f.change=function(n){f.fire("change",n)},f.resize=function(){f.visible&&f.reposition()},f.add=function(n,t,i){return f.list.add(n,t,i),f},f.clear=function(){return f.list.clear(),f},f.setScroll=function(n){return f.list.setScroll(n),f},f.setWidth=function(n){return typeof n=="number"?(n=Math.max(n,220),f.element.style.width=n+"px",r.documentMode&&r.documentMode<=5&&(n-=2),f.list.element.style.width=n+"px"):(f.element.style.width=n,f.list.element.style.width=n),f.fixedWidth=n!=="auto",f.element.style.minWidth=0,f},f.setHeight=function(n){return f.list.element.style.height=typeof n=="number"?n+"px":n,f},f.filter=function(n){return n=n||i.getValue(f.field),f.skipFilter?f.list.collection.match(n).length<f.list.collection.count&&f.list.fire("filter"):(f.list.filter(n,f.skipFilter),n&&!f.list.collection.count&&!f.skipFilter&&!f.options.emptyMessage?f.hide():f.show()),f.fire("filter",n),f},f.disable=function(){return f.disabled=!0,f},f.enable=function(){return f.disabled=!1,f},f.destroy=function(){i.remove(f.element),i.ignore(r,"click",o),i.ignore(n,"resize",e);for(var t=0;t<f.fieldListeners.length;t++)i.ignore(f.fieldListeners[t].field,f.fieldListeners[t].event,f.fieldListeners[t].action)},f.element.appendChild(f.header.element),f.element.appendChild(f.list.element),f.element.appendChild(f.footer.element),f.header.init(),f.footer.init(),t&&f.load(t),f.options.width&&f.setWidth(f.options.width),f.options.height&&f.setHeight(f.options.height),f.options.className&&i.addClass(f.element,f.options.className),f.field||f.hide(),f},i.Modal=i.Modal||function(n){function u(n){return n=n||{},n.type=n.type||"text",n}var t=new i.Eventable(this);return t.options=n||{},t.element=i.create("div",{className:"pcamodal"}),t.border=i.create("div",{className:"pcaborder"}),t.frame=i.create("div",{className:"pcaframe"}),t.content=i.create("div",{className:"pcacontent pcatext"}),t.mask=i.create("div",{className:"pcafullscreen pcamask"}),t.form=[],t.header={element:i.create("div",{className:"pcaheader"}),headerText:i.create("div",{className:"pcatitle"},t.options.titleStyle||""),init:function(){this.setText(t.options.title||"")},setContent:function(n){return n=n||"",typeof n=="string"?this.element.innerHTML=n:this.element.appendChild(n),t.fire("header"),this},setText:function(n){return n=n||"",this.element.appendChild(this.headerText),typeof n=="string"?this.headerText.innerHTML=n:this.headerText.appendChild(n),t.fire("header"),this},show:function(){return this.element.style.display="",t.fire("header"),this},hide:function(){return this.element.style.display="none",t.fire("header"),this}},t.footer={element:i.create("div",{className:"pcafooter"}),setContent:function(n){return n=n||"",typeof n=="string"?this.element.innerHTML=n:this.element.appendChild(n),t.fire("footer"),this},show:function(){return this.element.style.display="",t.fire("header"),this},hide:function(){return this.element.style.display="none",t.fire("header"),this}},t.setTitle=function(n){t.header.setText(n).show()},t.setContent=function(n){return typeof n=="string"?t.content.innerHTML=n:t.content.appendChild(n),t.fire("change"),t},t.addField=function(n,r){r=u(r);var e=i.create("div",{className:"pcainputrow"}),f=i.create(r.tag||"input",r),o=i.create("label",{htmlFor:f.id||"",innerHTML:n||""});return e.appendChild(o),e.appendChild(f),t.setContent(e),t.form.push({label:n,element:f}),f},t.addHalfFields=function(n,r,f){r=u(r),f=u(f);var s=i.create("div",{className:"pcainputrow"}),e=i.create(r.tag||"input",r),o=i.create(f.tag||"input",f),h=i.create("label",{htmlFor:e.id||"",innerHTML:n||""});return i.addClass(e,"pcahalf"),i.addClass(o,"pcahalf"),s.appendChild(h),s.appendChild(e),s.appendChild(o),t.setContent(s),t.form.push({label:"First "+n,element:e}),t.form.push({label:"Second "+n,element:o}),[e,o]},t.addButton=function(n,u,f){function o(){for(var r={},n=0;n<t.form.length;n++)r[t.form[n].label]=i.getValue(t.form[n].element);u(r)}var e=i.create("input",{type:"button",value:n,className:"pcabutton"});return u=u||function(){},!f||r.documentMode&&r.documentMode<=7||(e.style.cssFloat="right"),i.listen(e,"click",o),t.footer.setContent(e),e},t.centre=function(){var n=i.getSize(t.element);return t.element.style.marginTop=-(n.height/2)+"px",t.element.style.marginLeft=-(n.width/2)+"px",t},t.show=function(){return r.documentMode&&r.documentMode<=5||/\bMSIE\s6/.test(i.agent)||(t.element.style.display="",t.mask.style.display="",t.centre(),t.fire("show")),t},t.hide=function(){return t.element.style.display="none",t.mask.style.display="none",t.fire("hide"),t},t.clear=function(){while(t.content.childNodes.length)t.content.removeChild(t.content.childNodes[0]);while(t.footer.element.childNodes.length)t.footer.element.removeChild(t.footer.element.childNodes[0]);return t.form=[],t.fire("clear"),t},i.listen(t.mask,"click",t.hide),t.element.appendChild(t.border),t.element.appendChild(t.frame),t.frame.appendChild(t.header.element),t.frame.appendChild(t.content),t.frame.appendChild(t.footer.element),t.header.init(),i.append(t.mask),i.append(t.element),t.hide(),t},i.Tooltip=i.Tooltip||function(t,r){var u=new i.Eventable(this);return u.element=i.create("div",{className:"pcatooltip"}),u.background=i.create("div",{className:"pcabackground"}),u.message=i.create("div",{className:"pcamessage",innerText:r}),u.show=function(){return u.element.style.display="",u.position(),u.fire("show"),u},u.hide=function(){return u.element.style.display="none",u.fire("hide"),u},u.setMessage=function(n){i.setValue(u.message,n)},u.position=function(){var s=i.getPosition(t),l=i.getSize(t),a=i.getTopOffsetParent(t),o=i.getSize(u.message),c=i.getSize(n),e=i.getScroll(n),h=!i.isPage(a),r=s.top-o.height-5+(h?e.top:0),f=s.left+l.width/2-o.width/2+(h?e.left:0);r=Math.min(r,c.height+e.top-o.height),r=Math.max(r,0),f=Math.min(f,c.width+e.left-o.width),f=Math.max(f,0),u.element.style.top=r+"px",u.element.style.left=f+"px"},(t=i.getElement(t))&&(i.listen(t,"mouseover",u.show),i.listen(t,"mouseout",u.hide)),u.element.appendChild(u.background),u.element.appendChild(u.message),u.setMessage(r),i.append(u.element),u.hide(),u},i.formatLine=i.formatLine||function(n,t){function i(t,i){var r=(typeof n[t]=="function"?n[t]():n[t])||"";return i==="!"?r.toUpperCase():r}return t=t.replace(/\{([^\}]*\{(\w+)([^\}\w])?\}[^\}]*)\}/g,function(n,t,r,u){var f=i(r,u);return f?t.replace(/\{(\w+)([^\}\w])?\}/g,f):""}),t.replace(/\{(\w+)([^\}\w])?\}/g,function(n,t,r){return i(t,r)})},i.formatTag=i.formatTag||function(n){return n?i.replaceList(i.replaceList(i.removeHtml(n.toUpperCase()),i.diacritics),i.synonyms):""},i.formatTagWords=i.formatTagWords||function(n){return i.formatTag(n).split(" ")},i.formatCamel=i.formatCamel||function(n,t){function i(n,i,r){return i+t+r}return t=t||" ",n=n.replace(/([a-z])([A-Z0-9])/g,i),n=n.replace(/([0-9])([A-Z])/g,i),n=n.replace(/([A-Z])([A-Z][a-z])/g,i)},i.replaceList=i.replaceList||function(n,t){for(var i=0;i<t.length;i++)n=n.toString().replace(t[i].r,t[i].w);return n},i.removeHtml=i.removeHtml||function(n){return n.replace(/<(?:.|\s)*?>+/g,"")},i.escapeHtml=i.escapeHtml||function(n){return i.replaceList(n,i.hypertext)},i.validId=i.validId||function(n){return/[a-z0-9\-_:\.\[\]]+/gi.exec(n)},i.trimSpaces=i.trimSpaces||function(n){return n.replace(/^\s+|\s(?=\s)|\s$/g,"")},i.tidy=i.tidy||function(n,t){t=t.replace("\\","\\\\");var i=new RegExp("^"+t+"+|"+t+"(?="+t+")|"+t+"$","gi");return n.replace(i,"")},i.getText=i.getText||function(n){return/[a-zA-Z][a-zA-Z\s]+[a-zA-Z]/.exec(n)},i.getNumber=i.getNumber||function(n){return/\d+/.exec(n)},i.parseJSON=i.parseJSON||function(n){return n&&/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))?typeof JSON!="undefined"?JSON.parse(n):eval(n):{}},i.parseJSONDate=i.parseJSONDate||function(n){return new Date(parseInt(i.getNumber(n)))},i.containsWord=i.containsWord||function(n,t){var i=new RegExp("\\b"+t+"\\b","gi");return i.test(n)},i.removeWord=i.removeWord||function(n,t){var i=new RegExp("\\s?\\b"+t+"\\b","gi");return n.replace(i,"")},i.merge=i.merge||function(n,t){for(var i in n)t[i]||(t[i]=n[i]);return t},i.getElement=i.getElement||function(n,t){var f,u;if(!n)return null;if(typeof n.nodeType=="number")return n;if(typeof n=="string"){if(t=i.getElement(t)||r,f=t.getElementById?t.getElementById(n):null,f)return f;if(u=t.getElementsByName?t.getElementsByName(n):null,u.length)return u[0]}return i.fuzzyMatch?i.getElementByRegex(n,t):null},i.getElementByRegex=i.getElementByRegex||function(n,t){var e,o,u,f;if(typeof n=="string")try{n=new RegExp(n)}catch(s){return null}if(n&&typeof n=="object"&&n.constructor===RegExp)for(t=i.getElement(t)||r,e=0;e<i.fuzzyTags.length;e++)for(o=t.getElementsByTagName(i.fuzzyTags[e]),u=0;u<o.length;u++)if(f=o[u],f.id&&n.test(f.id))return f;return null},i.getValue=i.getValue||function(n){var u,t,f;if(n=i.getElement(n)){if(n.tagName==="INPUT"||n.tagName==="TEXTAREA"){if(n.type==="checkbox")return n.checked;if(n.type==="radio"){for(u=r.getElementsByName(n.name),t=0;t<u.length;t++)if(u[t].checked)return u[t].value}else return n.value}if(n.tagName==="SELECT")return n.selectedIndex<0?"":(f=n.options[n.selectedIndex],f.value||f.text||"");if(n.tagName==="DIV"||n.tagName==="SPAN"||n.tagName==="TD"||n.tagName==="LABEL")return n.innerHTML}return""},i.setValue=i.setValue||function(n,t){var o,e,s,f,u;if((t||t==="")&&(n=i.getElement(n)))if(o=t.toString(),e=i.formatTag(o),n.tagName==="INPUT")if(n.type==="checkbox")n.checked=typeof t=="boolean"&&t||e==="TRUE";else if(n.type==="radio"){for(s=r.getElementsByName(n.name),f=0;f<s.length;f++)if(i.formatTag(s[f].value)===e){s[f].checked=!0;return}}else n.value=i.tidy(o.replace(/\\n|\n/gi,", "),", ");else if(n.tagName==="TEXTAREA")n.value=o.replace(/\\n|\n/gi,"\n");else if(n.tagName==="SELECT"){for(u=0;u<n.options.length;u++)if(i.formatTag(n.options[u].value)===e||i.formatTag(n.options[u].text)===e){n.selectedIndex=u;return}}else(n.tagName==="DIV"||n.tagName==="SPAN"||n.tagName==="TD"||n.tagName==="LABEL")&&(n.innerHTML=o.replace(/\\n|\n/gi,"<br/>"))},i.inputField=i.inputField||function(n){return(n=i.getElement(n))?n.tagName&&(n.tagName==="INPUT"||n.tagName==="TEXTAREA")&&n.type&&(n.type==="text"||n.type==="search"||n.type==="email"||n.type==="textarea"||n.type==="number"||n.type==="tel"):!1},i.selectList=i.selectList||function(n){return(n=i.getElement(n))?n.tagName&&n.tagName==="SELECT":!1},i.getSelectedItem=i.getSelectedItem||function(n){return(n=i.getElement(n))&&n.tagName==="SELECT"&&n.selectedIndex>=0?n.options[n.selectedIndex]:null},i.checkBox=i.checkBox||function(n){return(n=i.getElement(n))?n.tagName&&n.tagName==="INPUT"&&n.type&&n.type==="checkbox":!1},i.clear=i.clear||function(n){return i.setValue(n,""),i},i.getPosition=i.getPosition||function(t){var f={left:0,top:0},u,r;if(t=i.getElement(t)){if(!t.tagName)return f;if(typeof t.getBoundingClientRect!="undefined"){var s=t.getBoundingClientRect(),e=!i.isPage(i.getTopOffsetParent(t)),h=i.getScroll(n),o=i.getParentScroll(t);return{left:s.left+o.left+(e?0:h.left),top:s.top+o.top+(e?0:h.top)}}u=0,r=0;do u+=t.offsetLeft,r+=t.offsetTop;while(t=t.offsetParent);return{left:u,top:r}}return f},i.isPage=i.isPage||function(t){return t===n||t===r||t===r.body},i.getScroll=i.getScroll||function(n){return{left:parseInt(n.scrollX||n.scrollLeft,10)||(i.isPage(n)?parseInt(r.documentElement.scrollLeft)||0:0),top:parseInt(n.scrollY||n.scrollTop,10)||(i.isPage(n)?parseInt(r.documentElement.scrollTop)||0:0)}},i.getSize=i.getSize||function(n){return{height:n.offsetHeight||n.innerHeight||(i.isPage(n)?r.documentElement.clientHeight||r.body.clientHeight:0),width:n.offsetWidth||n.innerWidth||(i.isPage(n)?r.documentElement.clientWidth||r.body.clientWidth:0)}},i.getParentScroll=i.getParentScroll||function(n){var u={left:0,top:0},r,t;if(n=i.getElement(n)){if(!n.tagName||!(n=n.parentNode))return u;r=0,t=0;do{if(i.isPage(n))break;r+=parseInt(n.scrollLeft)||0,t+=parseInt(n.scrollTop)||0}while(n=n.parentNode);return{left:r,top:t}}return u},i.getTopOffsetParent=i.getTopOffsetParent||function(n){while(n.offsetParent)if(n=n.offsetParent,i.getStyle(n,"position")==="fixed")break;return n},i.getStyle=i.getStyle||function(t,i){return((n.getComputedStyle?n.getComputedStyle(t):t.currentStyle)||{})[i]||""},i.addClass=i.addClass||function(n,t){(n=i.getElement(n))&&(i.containsWord(n.className||"",t)||(n.className+=(n.className?" ":"")+t))},i.removeClass=i.removeClass||function(n,t){(n=i.getElement(n))&&(n.className=i.removeWord(n.className,t))},i.setAttribute=i.setAttribute||function(n,t,r){(n=i.getElement(n))&&n.setAttribute(t,r)},i.setAttributes=i.setAttributes||function(n,t){if(n=i.getElement(n))for(var r in t)n.setAttribute(r,t[r])},i.applyStyleFixes=i.applyStyleFixes||function(n,t){for(var h,u,f,s,o,e=0;e<r.styleSheets.length;e++){h=r.styleSheets[e],u=[];try{u=h.rules||h.cssRules||[]}catch(c){}for(f=0;f<u.length;f++)if(s=u[f],s.selectorText.toLowerCase()===n)for(o in t)s.style[o]=t[o]}i.styleFixes.push({selectorText:n,fixes:t})},i.reapplyStyleFixes=i.reapplyStyleFixes||function(){var t=i.styleFixes,n;for(i.styleFixes=[],n=0;n<t.length;n++)i.applyStyleFixes(t[n].selectorText,t[n].fixes)},i.createStyleSheet=i.createStyleSheet||function(n){r.createStyleSheet?r.createStyleSheet().cssText=n:r.head.appendChild(i.create("style",{type:"text/css",innerHTML:n}))},i.create=i.create||function(n,t,i){var f=r.createElement(n),u;for(u in t||{})f[u]=t[u];return i&&(f.style.cssText=i),f},i.append=i.append||function(n){i.container||(i.container=i.create("div",{className:"pca"}),r.body.appendChild(i.container)),i.container.appendChild(n)},i.remove=i.remove||function(n){n&&n.parentNode&&n.parentNode===i.container&&i.container.removeChild(n)},i.listen=i.listen||function(t,i,r,u){n.addEventListener?t.addEventListener(i,r,u):t.attachEvent("on"+i,r)},i.fire=i.fire||function(n,t){if(r.createEvent){var i=r.createEvent("HTMLEvents");return i.initEvent(t,!0,!0),!n.dispatchEvent(i)}return n.fireEvent("on"+t,r.createEventObject())},i.ignore=i.ignore||function(t,i,r){n.removeEventListener?t.removeEventListener(i,r):t.detachEvent("on"+i,r)},i.smash=i.smash||function(t){var i=t||n.event;i.stopPropagation?i.stopPropagation():i.cancelBubble=!0,i.preventDefault?i.preventDefault():i.returnValue=!1},i.debug=i.debug||function(n){typeof console!="undefined"&&console.debug&&console.debug(n)},i.debounce=i.debounce||function(n,t,i){var r;return function(){var o=this,u=arguments,e,f;arguments&&arguments.length>0&&(u=[{target:arguments[0].target||arguments[0].srcElement}]),e=function(){r=null,i||n.apply(o,u)},f=i&&!r,clearTimeout(r),r=setTimeout(e,t),f&&n.apply(o,u)}},i.defined=i.defined||function(n){return typeof n=="function"},i.fnDefined=i.defined,i.getLabel=i.getLabel||function(n){for(var f=r.getElementsByTagName("LABEL"),u,t=0;t<f.length;t++)if(f[t].htmlFor!==""&&(u=i.getElement(f[t].htmlFor),u&&u.name===n||u.id===n))return f[t];return null},i.getReferenceToElement=i.getReferenceToElement||function(n){return typeof n=="string"?n:n?n.id||n.name||"":""},i.extend=i.extend||function(n){for(var i,t=1;t<arguments.length;t++)for(i in arguments[t])arguments[t].hasOwnProperty(i)&&(n[i]=arguments[t][i]);return n},i.getStyle=i.getStyle||function(n,t){var i=function(n){return n.replace(/\-(\w)/g,function(n,t){return t.toUpperCase()})};return n.currentStyle?n.currentStyle[i(t)]:r.defaultView&&r.defaultView.getComputedStyle?r.defaultView.getComputedStyle(n,null).getPropertyValue(t):n.style[i(t)]},i.guid=i.guid||function(){function n(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return function(){return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()}}(),i.sessionId=i.sessionId||i.guid(),v()})(window);
(function(){var n=window.pca=window.pca||{};n.Email=function(t,i){function h(t){var i=r.emailElement,e=i.parentNode,u,f;i.pca_wrapped||(u=r.wrapper=n.create("div",{className:"validator validator-email validation-none"}),f=r.feedbackElement=n.create("div",{className:"feedback feedback-email"}),e.insertBefore(u,i),u.appendChild(i),u.appendChild(f),i.wrapper=u,w(),t||v(),i.pca_wrapped=!0)}function w(){var t=r.emailElement.getBoundingClientRect();r.width=t.width,r.height=t.height,r.fontSize=n.getStyle(r.emailElement,"font-size"),r.feedbackElement.style.height=r.height+10+"px",r.feedbackElement.style.width=r.height+10+"px",r.feedbackElement.style.backgroundSize=(r.height-10>40?40:r.height-10)+"px",r.feedbackElement.style.top="-5px",r.wrapper.style.height=r.height+"px",r.wrapper.style.width=r.width+"px"}function v(){var n=r.emailElement.offsetParent!=null;r.visibilityMonitor=setInterval(function(){n!==(r.emailElement.offsetParent!=null)&&(n=!n,l(),h(!0))},100)}function l(){var t=r.emailElement,n,i;t.pca_wrapped&&(n=t.wrapper,i=n.parentNode,i.insertBefore(t,n),i.removeChild(n),t.pca_wrapped=!1)}function c(){var n=r.emailElement;if(!p(n.value)){r.fire("validate",!1),o(n),r.isValid=!1,n.value.length>0&&s(n,!1);return}a(n),k(n,y,b)}function p(n){return u.VALIDATION_EMAIL_REGEX.test(n)}function k(t,i,f){n.fetch(r.options.provider+"/Interactive/Validate/"+u.EMAIL_VALIDATION_API_VERSION,{key:r.options.key,email:t.value,timeout:r.options.timeout,$cache:!0,$block:!0},i,f)}function b(){e(r.emailElement)}function y(n){var f=r.emailElement,i;n&&n.length>0?(i=n[0],r.isValid=i.ResponseCode===u.EMAIL_SUCCESS_INTERNAL_STATUS||i.ResponseCode===u.EMAIL_SUCCESS_EXTERNAL_STATUS,r.fire("validate",r.isValid,i),s(f,r.isValid),e(f)):e(f)}function o(){var t=r.emailElement;r.options.minimal||(t=t.wrapper),n.removeClass(t,"validation-no"),n.removeClass(t,"validation-yes"),r.options.setCssClassValid.trim()!==""&&n.removeClass(t,r.options.setCssClassValid),r.options.setCssClassInvalid.trim()!==""&&n.removeClass(t,r.options.setCssClassInvalid)}function s(t,i){r.options.minimal||(t=t.wrapper);var u="validation-"+(i?"yes":"no");f&&(u+="-fallback"),n.addClass(t,u),n.removeClass(t,"validation-none"),n.addClass(t,i?r.options.setCssClassValid:r.options.setCssClassInvalid)}function a(){o(),r.options.minimal||(n.removeClass(r.emailElement.wrapper,"validation-none"),f?n.addClass(r.emailElement.wrapper,"loading-fallback"):n.addClass(r.emailElement.wrapper,"loading"))}function e(){r.options.minimal||(f?n.removeClass(r.emailElement.wrapper,"loading-fallback"):n.removeClass(r.emailElement.wrapper,"loading"))}var r=new n.Eventable(this),u,f;r.fields=t||[],r.emailElement=null,r.isValid=!1,r.width=0,r.height=0,r.fontSize="11px",r.options=n.extend({},{provider:"EmailValidation",key:"",timeout:5e3,minimal:!1,setCssClassValid:"",setCssClassInvalid:""},i||{}),r.key=r.options.key,typeof r.options.minimal=="string"&&(r.options.minimal=r.options.minimal.toLowerCase()==="true"),u={EMAIL_SUCCESS_INTERNAL_STATUS:"Valid",EMAIL_SUCCESS_EXTERNAL_STATUS:"Valid_CatchAll",EMAIL_VALIDATION_API_VERSION:"v2.00",VALIDATION_KEYPRESS_TIMEOUT:1e3,VALIDATION_EMAIL_REGEX:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/},f=document.all&&!document.addEventListener,r.load=function(){for(var i,t=0;t<r.fields.length;t++)i=r.fields[t],i.field=="{Email}"&&(r.emailElement=n.getElement(i.element));r.options.minimal||r.emailElement==null||h(),r.emailElement!=null&&(n.listen(r.emailElement,"keyup",n.debounce(c,u.VALIDATION_KEYPRESS_TIMEOUT)),n.listen(r.emailElement,"blur",c),n.listen(r.emailElement,"keydown",o))},r.destroy=function(){return r.options.minimal?r:(r.emailElement!=null&&l(),r)},n.ready(r.load)}})();
(function(){pca.EmailValidation=function(){var n=new pca.Eventable(this);n.controls=[],n.each=function(t){for(var i=0;i<n.controls.length;i++)t(n.controls[i])},n.load=function(){var t,r,i;for(n.bindings=pca&&pca.platform&&pca.platform.getBindingsForService?pca.platform.getBindingsForService("PLATFORM_EMAILVALIDATION"):[],n.destroy(),t=0;t<n.bindings.length;t++){r="";try{r=n.bindings[t].options.key}catch(u){}pca.platform.fire("fields",["emailvalidation",r,n.bindings[t].fields]),pca.platform.fire("options",["emailvalidation",r,n.bindings[t].options]),i=new pca.Email(n.bindings[t].fields,n.bindings[t].options),i.listen("validate",function(n,t){pca.platform.fire("data",["emailvalidation",i.key,n,t||null])}),n.controls.push(i),pca.platform.fire("load",["emailvalidation",i.key,i])}pca.platform.fire("ready",["emailvalidation",n])},n.destroy=function(){n.each(function(n){n.destroy()}),n.controls=[]},pca.ready(n.load)},window.emailValidation=pca.emailValidation=new pca.EmailValidation})()
